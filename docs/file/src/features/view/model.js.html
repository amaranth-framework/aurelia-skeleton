<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../../">
  <title data-ice="title">src/features/view/model.js | aurelia-skeleton</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="A starter kit for building a standard navigation-style app with Aurelia and Webpack."><meta property="twitter:card" content="summary"><meta property="twitter:title" content="aurelia-skeleton"><meta property="twitter:description" content="A starter kit for building a standard navigation-style app with Aurelia and Webpack."></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/app.js~App.html">App</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-configure">configure</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-helper">components/helper</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/helper/a.js~CHAnchor.html">CHAnchor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/helper/content.js~CHContent.html">CHContent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/helper/table.js~CHTable.html">CHTable</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-helper-form">components/helper/form</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/helper/form/input.js~CHInputElement.html">CHInputElement</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/helper/form/select.js~CHSelectElement.html">CHSelectElement</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SELECT_BIND_BY_MODEL">SELECT_BIND_BY_MODEL</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SELECT_BIND_BY_VALUE">SELECT_BIND_BY_VALUE</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-page">components/page</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/page/breadcrumb.js~CPBreadcrumb.html">CPBreadcrumb</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/page/breadcrumb.js~CPBreadcrumbElement.html">CPBreadcrumbElement</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/page/title.js~CPTitle.html">CPTitle</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/page/title.js~CPTitleElement.html">CPTitleElement</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#features">features</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/features/model-view.js~ModelViewTrait.html">ModelViewTrait</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ModelView">ModelView</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="http://aurelia.io/docs/api/router/interface/NavigationInstructions">Aurelia.NavigationInstructions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://github.com/Vheissu/aurelia-configuration">AureliaConfiguration</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="http://aurelia.io/docs/api/event-aggregator">EventAggregator</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="http://aurelia.io/docs/api/i18n">I18N</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="http://aurelia.io/docs/api/logging">Logger</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="http://aurelia.io/docs/api/router">Router</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://github.com/pnegri/uuid-js">UUID</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#features-traits">features/traits</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/features/traits/eventable.js~Eventable.html">Eventable</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/features/traits/form.js~Form.html">Form</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/features/traits/logable.js~Logable.html">Logable</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/features/traits/restable.js~RESTable.html">RESTable</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#features-utils">features/utils</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/features/utils/messages.js~Messages.html">Messages</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-waitForElements">waitForElements</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-waitForVariable">waitForVariable</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getCookie">getCookie</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-removeCookie">removeCookie</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-setCookie">setCookie</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-deprecate">deprecate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-className">className</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-extend">extend</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-parentClassName">parentClassName</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-traits">traits</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-traitsExclude">traitsExclude</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-bindableHelper">bindableHelper</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Storage">Storage</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#features-view">features/view</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/features/view/component.js~Component.html">Component</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/features/view/model.js~Model.html">Model</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/features/view/template.js~Template.html">Template</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/features/view/view.js~View.html">View</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-properties">properties</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-property">property</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="http://aurelia.io/docs/api/templating/interface/ComponentAttached/">Aurelia.ComponentAttached</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="http://aurelia.io/docs/api/templating/interface/ComponentBind/">Aurelia.ComponentBind</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="http://aurelia.io/docs/api/templating/interface/ComponentCreated/">Aurelia.ComponentCreate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="http://aurelia.io/docs/api/templating/interface/ComponentDetached/">Aurelia.ComponentDetached</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="http://aurelia.io/docs/api/templating/interface/ComponentDetached/method/detached">Aurelia.ComponentDetached.detached</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="http://aurelia.io/docs/api/templating/interface/ComponentUnbind/">Aurelia.ComponentUnbind</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="http://aurelia.io/docs/api/templating/interface/ConfiguresRouter/">Aurelia.ConfiguresRouter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="http://aurelia.io/docs/api/templating/interface/DynamicComponentGetViewStrategy">Aurelia.DynamicComponentGetViewStrategy</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="http://aurelia.io/docs/api/router/interface/NavigationInstructions">Aurelia.NavigationInstructions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="http://aurelia.io/docs/api/router/interface/RoutableComponentActivate">Aurelia.RoutableComponentActivate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="http://aurelia.io/docs/api/router/interface/RoutableComponentCanActivate">Aurelia.RoutableComponentCanActivate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="http://aurelia.io/docs/api/router/interface/RoutableComponentCanDeactivate">Aurelia.RoutableComponentCanDeactivate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="http://aurelia.io/docs/api/router/interface/RoutableComponentDeactivate">Aurelia.RoutableComponentDeactivate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="http://aurelia.io/docs/api/router/interface/RouteConfig">Aurelia.RouteConfig</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#resources">resources</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-configure">configure</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#resources-html-attributes">resources/html-attributes</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/resources/html-attributes/am-uuid.js~AmUuid.html">AmUuid</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#templates-demo">templates/demo</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/templates/demo/components.js~TDComponents.html">TDComponents</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/templates/demo/demo.js~TDemo.html">TDemo</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#templates-demo-components">templates/demo/components</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/templates/demo/components/helper.js~TDHelper.html">TDHelper</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/templates/demo/components/page-breadcrumb.js~TDHAnchor.html">TDHAnchor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/templates/demo/components/page-title.js~TCPageTitle.html">TCPageTitle</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#templates-demo-components-helper">templates/demo/components/helper</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/templates/demo/components/helper/a.js~TDHAnchor.html">TDHAnchor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/templates/demo/components/helper/content.js~TCHCard.html">TCHCard</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/templates/demo/components/helper/form-input.js~TDHAnchor.html">TDHAnchor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/templates/demo/components/helper/form-select.js~TDHAnchor.html">TDHAnchor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/templates/demo/components/helper/table.js~TCHCard.html">TCHCard</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#templates-demo-components-helper-card">templates/demo/components/helper/card</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/templates/demo/components/helper/card/card.js~TCHCard.html">TCHCard</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#templates-demo-components-helper-form">templates/demo/components/helper/form</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/templates/demo/components/helper/form/content.js~TCHCard.html">TCHCard</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#templates-demo-components-helper-listing">templates/demo/components/helper/listing</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/templates/demo/components/helper/listing/listing.js~TCHListing.html">TCHListing</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#templates-demo-home">templates/demo/home</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/templates/demo/home/home.js~THome.html">THome</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#templates-statuses">templates/statuses</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/templates/statuses/404.js~Error404.html">Error404</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/features/view/model.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">/**
 * Aurelia Skeleton (https://github.com/amaranth-framework/aurelia-skeleton/)
 *
 * @link      https://github.com/amaranth-framework/aurelia-skeleton/ for the canonical source repository
 * @copyright Copyright (c) 2007-2017 IT Media Connect (http://itmediaconnect.ro)
 * @license   https://github.com/amaranth-framework/aurelia-skeleton/LICENSE MIT License
 */

import { Container, inject, NewInstance } from &apos;aurelia-dependency-injection&apos;;
import { validateTrigger, ValidationController } from &apos;aurelia-validation&apos;;

import { Component } from &apos;features/view/component&apos;;
import { className, extend } from &apos;features/utils/object&apos;;

/**
 * Abstract Model View (usable with &lt;compose&gt;)
 * @note Please keep in mind that Component and Model are almost the same thing, however Model is oriented to the idea
 * of a model-view having all it&apos;s functionality within a Model class, while the notion of a component can be extended
 * to any piece of replicable code or functionality within the website.
 * @extends {Component}
 */
@inject(NewInstance.of(ValidationController))
export class Model extends Component {
    /**
     * Model Index Field Name
     * @type {String}
     */
    static INDEX_NAME = &apos;id&apos;;
    /**
     * @see View#constructor
     * @param {ValidationController} validationController
     */
    constructor(validationController, ...args) {
        super(...args);

        this.validationController = validationController;
        this.validationController.validateTrigger = validateTrigger.change;
    }
    /**
     * @see View::attached()
     */
    attached() {
        this.events.publish(`model:${this.settings.name}:attached`, this);
    }
    /**
     * @see View::defaultSettings()
     * @return {Object}
     */
    get defaultSettings() {
        return extend(true, super.defaultSettings, {
            endpoint: &apos;default&apos;,
            name: &apos;abstract-model&apos;
        });
    }
    /**
     * @see View::detached()
     */
    detached() {
        super.detached();
        this.events.publish(`model:${this.settings.name}:detached`, this);
    }
    /**
     * @see View::init()
     */
    init() {
        super.init();
        // init validation if method exists
        if (typeof this.applyValidationRules === &apos;function&apos;) {
            this.applyValidationRules();
        }
        // validate at request
        this.subscribeEvent(`model:${this.settings.name}:validate`, (model) =&gt; model === this ? this.validate() : false);
        // publish form passed init
        this.events.publish(`model:${this.settings.name}:init`, this);
    }
    /**
     * @singleton
     * @type {[type]}
     */
    static get instance() {
        if (!this.__instance__) {
            this.__instance__ = this.newInstance();
        }
        return this.__instance__;
    }
    /**
     * Load data for a certain model, by model&apos;s id.
     * @param  {Number} id Default null.
     * @return {Promise} Promise&lt;Object&gt;|Promise&lt;Error&gt;
     */
    async load(id = null) {
        let prototype = Object.getPrototypeOf(this);
        this[prototype.INDEX_NAME] = this[prototype.INDEX_NAME] || id;

        if (!this[prototype.INDEX_NAME]) {
            throw Error(`Model has no &apos;${prototype.INDEX_NAME}&apos; value. Cannot load an empty model.`);
        }

        return await this.getEndpoint(this.settings.endpoint || &apos;default&apos;)
            .findOne(this.settings.services.load, this[prototype.INDEX_NAME])
            .then(result =&gt; {
                this.setData(result);
                return this.toObject();
            });
    }
    /**
     * List the entire set of entities from the table.
     * @param  {Array|String|null} props
     * @param  {Array|String|null} filter
     * @return {Promise&lt;Array&gt;|Promise&lt;Error&gt;}
     */
    static async list(props = null, filter = null) {
        const model = this.instance;
        if (model.canActivate &amp;&amp; !model.canActivate()) {
            throw Error(`&apos;${className(model)}&apos; could not pass by &apos;canActivate()&apos; method.`);
        }
        model.activate();
        return model.getEndpoint(model.settings.endpoint || &apos;default&apos;).find(model.settings.services.list);
    }
    /**
     * Return new empty instance of the model
     * @return {Model}
     */
    static newInstance() {
        // return new this();
        return Container.instance.get(this);
    }
    /**
     * Remove existing model
     * @return {Promise&lt;*&gt;|Promise&lt;Error&gt;}
     */
    async remove() {
        let prototype = Object.getPrototypeOf(this);
        return await this.getEndpoint(this.settings.endpoint || &apos;default&apos;)
            .destroyOne(this.settings.services.remove, this[prototype.INDEX_NAME]);
    }
    /**
     * Remove the model with id ...
     * @param  {Number} id
     * @return {Promise&lt;*&gt;|Promise&lt;Error&gt;}
     */
    static async remove(id) {
        let model = this.newInstance();
        let prototype = Object.getPrototypeOf(model);
        model[prototype.INDEX_NAME] = id;
        return model.remove();
    }
    /**
     * Set data to the model, from an external source.
     * @param  {Object} data
     */
    setData(data) {
        this._properties.forEach((key) =&gt; {
            if (data[key] !== undefined) {
                this[key] = data[key];
            }
        });
    }
    /**
     * Save model.
     * @return {Promise&lt;*&gt;|Promise&lt;Error&gt;}
     */
    async save() {
        let prototype = Object.getPrototypeOf(this);
        if (this[prototype.INDEX_NAME]) {
            return await this.getEndpoint(this.settings.endpoint || &apos;default&apos;)
                .updateOne(this.settings.services.update, this[prototype.INDEX_NAME], this.toObject());
        }

        return await this.getEndpoint(this.settings.endpoint || &apos;default&apos;)
            .create(this.settings.services.save, this.toObject());
    }
    /**
     * Convert model to list of inputs for form component.
     * @method toFormConfig
     * @return {Array&lt;{}&gt;}
     */
    toFormConfig() {
        return this._properties.map((key) =&gt; {
            const input = {
                type: &apos;text&apos;,
                label: this._propertySettings[key].name || key,
                name: this._propertySettings[key].name || key
            };
            return (this._propertySettings[key] &amp;&amp; this._propertySettings[key].form) ?
                extend(true, input, this._propertySettings[key].form) : input;
        });
    }
    /**
     * Take the entire Model class and obtain only the saveable/workable object data.
     * @return {Object}
     */
    toObject() {
        let obj = {};
        this._properties.forEach((key) =&gt; obj[key] = this[key]);
        return obj;
    }
    /**
     * Validate method.
     */
    async validate() {
        const RESULT = await this.validationController.validate();
        if (RESULT.valid) {
            this.events.publish(`model:${this.settings.name}:validated`, this);
            return;
        }
        this.events.publish(`model:${this.settings.name}:invalid`, { model: this, result: RESULT });
    }
}


/**
 * Experimental decorator for mentioning the model&apos;s table properties.
 * Paramaeter is an array of {String} or {Object} elements.
 * @TODO: Method leaves room for validation &amp; other toys.
 * @param  {Array} list
 */
export function properties(list) {
    return (target, key) =&gt; {
        list.forEach(item =&gt; property(target, item));
    };
}

/**
 * Experimental decorator for mentioning the model&apos;s variable is actualy a table property.
 * @TODO: Method leaves room for validation &amp; other toys.
 * Params description:
 * - {String} target
 * - {String} key
 * - {Object} descriptor
 * @see {@link https://medium.com/google-developers/exploring-es7-decorators-76ecb65fb841}
 * @param  {any} args
 * @return {Object}
 */
export function property(...args) {
    /**
     * Properties of the defined table property
     * @type {Object}
     */
    let props = args[0];
    /**
     * Name of the defined table property
     * @type {String|Boolean}
     */
    let localKey = false;

    // if we&apos;re using decorators like `@property({list of properties})` or `@property(&apos;propertyName&apos;)`
    // we need to departe localKey from the rest of the object.
    if (args.length &lt; 2) {
        if (props.name) {
            localKey = props.name;
        } else {
            localKey = props;
            props = {
                name: localKey
            };
        }
    }

    /**
     * The real decorator we&apos;re embeding. We didn&apos;t add the descriptor param because we&apos;re not using it, however
     * it exists.
     * @param {Object}        target
     * @param {String|Object} key
     * @param {Object}        descriptor
     */
    let decorator = (target, key) =&gt; {
        let dprops = {};
        // considering the fact that you can also use the `@property` decorator, we need to determine whether
        // we have a key name defined by `localKey` or we&apos;re just using the variable upon the decorator has been placed.
        key = localKey || key;
        // because when using `@properties(...)` we need to remember both property settings and the target, we&apos;re forced
        // to send the entire settings object as the key parameter
        if (key.name) {
            dprops = key;
            key = key.name;
        }
        // push the key to the list of model properties
        target._properties = (target._properties || []).concat([key]);
        target._propertySettings = target._propertySettings || {};
        target._propertySettings[key] = dprops;
        // determine whether it already has a descriptor definition
        let definition = Object.getOwnPropertyDescriptor(target, key);
        // if it has a descriptor definition already, work around the getter and setter that were already defined
        if (definition) {
            Object.defineProperty(target, key, {
                get: definition.get,
                set: (newValue) =&gt; definition.set.call(target, newValue),
                enumerable: true,
                configurable: true
            });
        // otherwise, just add our own getter and setter descriptor
        } else {
            Object.defineProperty(target, key, {
                get: function() {
                    return this[&apos;__&apos; + key];
                },
                set: function(newValue) {
                    this[&apos;__&apos; + key] = newValue;
                },
                enumerable: true,
                configurable: true
            });
        }
        // set the default value if it exists
        if (dprops.default) {
            target[key] = dprops.default;
        }
    };
    // if calling `@property(...)`
    if (args.length &lt; 2) {
        return decorator;
    }
    // if calling `@property`
    // @NOTE: For the moment this method will not work with html bindable variables
    return decorator.apply(null, args);
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.0.3)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
